{% extends "base.html" %}
{% load static %}
{% load extras %}

{% block title %}Archived Notes - MindPad{% endblock %}

{% block content %}

<section class="text-center mb-10">
  <h2 class="text-3xl font-extrabold text-gray-800 dark:text-gray-100">
    🗄️ Archived Notes
  </h2>
  <p class="text-gray-600 dark:text-gray-400 mt-2">
    Manage archived notes, or move them to trash.
  </p>
</section>

{% if notes %}
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {% for note in notes %}
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-5 hover:shadow-xl transition flex flex-col">
        <h4 class="text-lg font-bold text-indigo-600 dark:text-indigo-400 mb-2">
          <a href="{% url 'note_detail' note.pk %}">{{ note.title }}</a>
          {% if note.is_locked %} 🔒{% endif %}
        </h4>

        <p class="text-gray-700 dark:text-gray-300 flex-1">
          {{ note.body|truncatechars:100 }}
        </p>

        {% if note.tags.all %}
          <div class="mt-3 flex flex-wrap gap-2">
            {% for tag in note.tags.all %}
              <span class="bg-indigo-100 text-indigo-600 text-xs px-2 py-1 rounded-full">
                #{{ tag }}
              </span>
            {% endfor %}
          </div>
        {% endif %}

        <div class="mt-4 flex justify-between text-sm text-gray-500 dark:text-gray-400">
          <span>Archived: {{ note.updated_at|short_timesince }}</span>
          <div class="flex gap-3">
            <a href="{% url 'note_unarchive' note.id %}" 
                onclick="return confirm('Remove this note from archive?')" 
                class="hover:text-green-600">📂 Unarchive</a>
            <a href="{% url 'note_trash' note.id %}" 
                onclick="return confirm('Are you sure you want to move this note to Trash?')" 
                class="hover:text-green-600">🗑️ Trash</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-gray-500 dark:text-gray-400 text-center">Archive is empty.</p>
{% endif %}

{% endblock %}
